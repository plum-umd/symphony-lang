principal A B C D E

-- assumptions: 
-- â€£ a > b
def euclid-rec : â„• â†’ â„¤{yao:C,D} â†’ â„¤{yao:C,D} â†’ â„¤{yao:C,D}
def euclid-rec n a b =
  if n â‰¡ 0
  then b
  else
    b â‰¡ share{yao:C,D} 0
    ? a
    â—‡ euclid-rec (n - 1) b (a % b)

-- assumptions:
-- â€£ a > 0
-- â€£ b > 0
def euclid : â„¤{yao:C,D} â†’ â„¤{yao:C,D} â†’ â„¤{yao:C,D}
def euclid a b =
  -- worst case is neighboring fibbinocci sequence numbers, with one iteration
  -- per sequence position, and 64 bit max bound is less than the 93rd fib
  -- number; n = 94 for good measure.
  let n = 94   
  in
  a â‹— b
  ? euclid-rec n a b
  â—‡ euclid-rec n b a

def euclid-mpc : ğŸ™ â†’ {inp:A,B;rev:E} â„¤{ssec:E}
def euclid-mpc â€¢ =
  let ab = {par:A,B} read â„¤ "euclid.txt"
  in
  reveal{E}
  euclid (share{yao:C,D} ab.A) (share{yao:C,D} ab.B)

def main :{inp:A,B;rev:E} â„¤{ssec:E}
def main = euclid-mpc â€¢
