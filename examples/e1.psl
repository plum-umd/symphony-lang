-- isec     = â€œindependent secretsâ€
-- ssec     = â€œshared secretsâ€
-- ccir     = â€œcomparison circuitâ€ (contains â‰¤ operations)
-- yshare   = â€œyao secret-sharedâ€
-- MPC{A,B} = â€œsomething is revealed to A and Bâ€

principal A
principal B

def cmp : â„¤64{isec:A,B} â†’ â„¤64{ccir:A,B}
def cmp = Î» xy â†’ 
  let x : â„¤64{ncir:A}
  let x = ~xy.A 
  let y : â„¤64{ncir:B}
  let y = ~xy.B
  let r : â„¤64{ccir:B}
  let r = x â‰¤ y
  in r

def cmp-mpc : ğŸ™ â†’{inp:A,B;rev:} â„¤64{yshare:A,B}
def cmp-mpc = Î» â€¢ â†’
  let x : â„¤64{ssec:A}
  let x = {A} read[â„¤64] "e1-input.txt"
  let y : â„¤64{ssec:B}
  let y = {B} read[â„¤64] "e1-input.txt"
  let r : â„¤64{yshare:A,B}
  let r = mpc{yao} cmp âŸ¨A.x;B.yâŸ©
  in r 

def cmp-mpc-rev : ğŸ™ â†’{inp:A,B;rev:A,B} â„¤64{ssec:A,B}
def cmp-mpc-rev = Î» â€¢ â†’
  let r : â„¤64{yshare:A,B}
  let r = cmp-mpc â€¢
  let p : â„¤64{ssec:A,B}
  let p = reveal{A,B} r
  in p

def main : â„¤64{ssec:A,B}
def main = cmp-mpc-rev â€¢
